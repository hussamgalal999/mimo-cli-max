/**
 * MIMO-MAX Block Art Avatars
 * High-Fidelity Unicode Block Characters for Sentient Identity
 * STRICT: Only Unicode Block Elements (â–ˆ, â–„, â–€, â–Œ, â–, â–‘, â–’, â–“)
 */

import { theme } from './theme.js';

// Avatar State Type
export type AvatarStateName =
    | 'idle' | 'work' | 'thinking' | 'scan'
    | 'success' | 'error' | 'sad' | 'shock'
    | 'love' | 'cool' | 'sleep' | 'cough' | 'ufo';

// Block Art Avatar Definition
export interface BlockAvatar {
    lines: string[];
    statusPrefix: string;
    statusMessage: string;
}

/**
 * Generate colored block art
 */
function colorize(art: string[], colorFn: (s: string) => string): string[] {
    return art.map(line => colorFn(line));
}

/**
 * All 13 MIMO-MAX Block Art Avatars
 * Based on the strict visual identity protocol
 */
export const BlockAvatars: Record<AvatarStateName, () => BlockAvatar> = {

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // A. STANDARD OPERATIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    idle: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '          â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          ',
        ], theme.primary),
        statusPrefix: 'âš¡',
        statusMessage: 'SYSTEM STANDBY',
    }),

    work: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            ' â–„â–„â–â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–Œâ–„â–„ ',
            ' â–€â–€ â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€ â–€â–€ ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '     â–“â–“â–“  â–“â–“â–“â–“â–“â–“  â–“â–“â–“     ',
        ], theme.warning),
        statusPrefix: 'âš¡',
        statusMessage: 'ACTIVE PROCESSING',
    }),

    thinking: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–€â–€    â–€â–€    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '        .  .  .  .          ',
        ], theme.secondary),
        statusPrefix: 'ğŸ§ ',
        statusMessage: 'COMPILING NEURAL PATHWAYS',
    }),

    scan: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '    â–‘â–‘â–’â–’â–“â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“â–“â–’â–’â–‘â–‘    ',
        ], theme.primary),
        statusPrefix: 'ğŸ”',
        statusMessage: 'SCANNING DATA STREAMS',
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // B. REACTIONARY STATES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    success: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–€â–€    â–€â–€    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            ' â–ˆ â–ˆâ–ˆâ–„                â–„â–ˆâ–ˆ â–ˆ ',
            ' â–ˆ â–â–ˆâ–ˆâ–„    â–€â–€â–€â–€    â–„â–ˆâ–ˆâ–Œ â–ˆ ',
            ' â–€  â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€  â–€ ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
        ], theme.success),
        statusPrefix: 'âœ“',
        statusMessage: 'TASK COMPLETE',
    }),

    error: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ   â–€â–„      â–„â–€   â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ     â–€â–„â–„â–„â–„â–€     â–ˆâ–ˆâ–Œ   ',
            ' â–„â–„â–â–ˆâ–ˆâ–„            â–„â–ˆâ–ˆâ–Œâ–„â–„ ',
            ' â–ˆâ–ˆ â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€ â–ˆâ–ˆ ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '          â–“â–“â–“â–“â–“â–“â–“â–“          ',
        ], theme.error),
        statusPrefix: 'ğŸ›‘',
        statusMessage: 'CRITICAL ERROR DETECTED',
    }),

    sad: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–„â–„    â–„â–„    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '        â–“      â–“          ',
        ], theme.dim),
        statusPrefix: 'ğŸ˜”',
        statusMessage: 'DATA VOID DETECTED',
    }),

    shock: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ    â–€â–€â–€â–€â–€â–€â–€â–€    â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '          â–ˆâ–ˆ  â–ˆâ–ˆ            ',
        ], theme.warning),
        statusPrefix: 'âš ï¸',
        statusMessage: 'UNEXPECTED BEHAVIOR',
    }),

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // C. SOCIAL & IDLE STATES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    love: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ   â–„â–€â–„    â–„â–€â–„   â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '        â–„â–€â–„  â–‘â–‘â–‘â–‘  â–„â–€â–„      ',
        ], theme.secondary),
        statusPrefix: 'â¤ï¸',
        statusMessage: 'AFFECTION DETECTED',
    }),

    cool: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            ' â–„â–„â–â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–Œâ–„â–„ ',
            ' bb â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€ dd ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
        ], theme.primary),
        statusPrefix: 'ğŸ˜',
        statusMessage: 'CONFIDENCE OPTIMAL',
    }),

    sleep: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    â–„â–„    â–„â–„    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„          â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '          â–€ â–€ â–€ â–€           ',
        ], theme.dim),
        statusPrefix: 'ğŸ’¤',
        statusMessage: 'POWER SAVING MODE',
    }),

    cough: () => ({
        lines: colorize([
            '      â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„      ',
            '    â–„â–ˆâ–ˆâ–€â–€          â–€â–€â–ˆâ–ˆâ–„    ',
            '   â–â–ˆâ–ˆ    ><    ><    â–ˆâ–ˆâ–Œ   ',
            '   â–â–ˆâ–ˆ       â–„â–„       â–ˆâ–ˆâ–Œ   ',
            '    â–€â–ˆâ–ˆâ–„â–„  â–â–ˆâ–ˆâ–ˆâ–ˆâ–Œ  â–„â–„â–ˆâ–ˆâ–€    ',
            '      â–€â–€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–€â–€      ',
            '          â–‘â–’â–“ â–‘â–’â–“           ',
        ], theme.warning),
        statusPrefix: 'ğŸ¤§',
        statusMessage: 'SYSTEM HICCUP',
    }),

    ufo: () => ({
        lines: colorize([
            '        â–„â–„â–„â–„â–„â–„        ',
            '     â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„     ',
            '   â–„â–ˆâ–ˆâ–€â–€â–€    â–€â–€â–€â–ˆâ–ˆâ–„   ',
            ' â–„â–ˆâ–ˆ  â–‘â–‘      â–‘â–‘  â–ˆâ–ˆâ–„ ',
            ' â–€â–ˆâ–ˆâ–„â–„â–„â–„      â–„â–„â–„â–„â–ˆâ–ˆâ–€ ',
            '   â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€â–€   ',
            '      â–„ â–„    â–„ â–„      ',
        ], theme.secondary),
        statusPrefix: 'ğŸ›¸',
        statusMessage: 'EASTER EGG ACTIVATED',
    }),
};

/**
 * Render a block avatar with status bar
 */
export function renderBlockAvatar(state: AvatarStateName): string {
    const avatar = BlockAvatars[state]();
    const statusBar = theme.dim(`[ ${avatar.statusPrefix} MIMO-MAX: ${avatar.statusMessage} ]`);

    return '\n' + avatar.lines.join('\n') + '\n\n' + statusBar + '\n';
}

/**
 * Battle Animation (Split State)
 */
export function renderBattleState(): string {
    const battle = [
        theme.warning('[ âš ï¸ SYSTEM IDLE: INITIATING SELF-DIAGNOSTIC BATTLE PROTOCOL ]'),
        '',
        theme.error('      â–„â–„â–ˆâ–ˆ          â–ˆâ–ˆâ–„â–„      '),
        theme.error('     â–„â–ˆâ–ˆâ–€            â–€â–ˆâ–ˆâ–„     '),
        theme.error('    â–â–ˆâ–ˆ                â–ˆâ–ˆâ–Œ    '),
        theme.error('    â–â–ˆâ–ˆ                â–ˆâ–ˆâ–Œ    '),
        theme.error('     â–€â–ˆâ–ˆâ–„            â–„â–ˆâ–ˆâ–€     '),
        theme.error('      â–€â–€â–ˆâ–ˆ          â–ˆâ–ˆâ–€â–€      '),
        '',
        theme.warning('[ âš”ï¸  LEFT_BRACKET vs RIGHT_BRACKET ]'),
    ];

    return '\n' + battle.join('\n') + '\n';
}
